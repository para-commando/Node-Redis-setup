<!DOCTYPE html>
<html>
<head>
  <title>To-Do List</title>
</head>
<body>
  <h1>To-Do List</h1>
  <form id="todo-form">
    <input type="text" id="todo-input">
    <button type="submit">Add</button>
  </form>
  <ul id="todo-list"></ul>

  <script>
    function renderTodoList() {
      fetch('http://localhost:3000/tasks')
        .then(response => response.json())
        .then(data => {
          const todoList = document.getElementById('todo-list');
          todoList.innerHTML = '';

          data.forEach(todo => {
            const li = document.createElement('li');
            li.textContent = todo;
            todoList.appendChild(li);
          });
        })
        .catch(error => console.error(error));
    }

    document.getElementById('todo-form').addEventListener('submit', event => {
      event.preventDefault();
      const todoInput = document.getElementById('todo-input');
      const text = todoInput.value.trim();
      if (text.length > 0) {
        fetch('http://localhost:3000/add', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ text: text })
        })
          .then(response => {
            if (response.ok) {
              renderTodoList();
            } else {
              throw new Error('Failed to add to-do item');
            }
          })
          .catch(error => console.error(error));

        todoInput.value = '';
      }
    });

    renderTodoList();
  </script>
</body>
</html>
